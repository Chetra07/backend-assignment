<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Add Bootstrap CSS  & font awesome & google font  --- start  --- -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
        crossorigin="anonymous" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Add Bootstrap CSS  & font awesome & google font  --- end  --- -->
    <!-- Your custom CSS -->
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="./global.css" />
    <!-- Set the favicon -->
    <link rel="icon" href="./public/images/logo-starbuck.png" type="image/logo-icon" />
    <link rel="shortcut icon" href="./public/images/logo-starbuck.png" type="image/x-icon" />
    <title>web_assignment</title>
</head>

<body>

    <nav class="mainNav">
        <div class="container">
          <div class="navbar">
            <div>
              <!-- dropDown -->
              <div class="custom-dropdown">
                <button class="custom-btn" id="customDropdownButton">
                  <i class="fa-solid fa-bars dropbtn"></i>
                </button>
                <div class="custom-dropdown-content" id="customDropdownContent">
                  <a class="actions" href="#">Home</a>
                  <a href="./pages/discount/discount.html">Discount</a>
                  <a href="./pages/popular/popular.html">Popular</a>
                  <a href="./pages/contact/contact.html">Contact_Us</a>
                </div>
              </div>
              <!-- link  -->
              <div class="linkNav">
                <a class="active" href="#">Home</a>
                <a href="./pages/discount/discount.html">Discount</a>
                <a href="./pages/popular/popular.html">Popular</a>
                <a href="./pages/contact/contact.html">Contact_Us</a>
              </div>
            </div>
            <div>
              <!-- logo -->
              <div class="logoNav">
                <img
                  src="./public/images/logo-starbuck.png"
                  width="85px"
                  alt=""
                />
              </div>
            </div>
            <div>
              <!-- search -->
              <div class="searchNav">
                <form class="btnSearch">
                  <input class="search" type="search" placeholder="Search" />
                  <a href="#"
                    ><img
                      src="./public/icons/search-icon.png"
                      width="21px"
                      alt=""
                  /></a>
                </form>
                <div class="btnShop">
                  <a href="#"
                    ><img
                      src="../frontend/public/icons/shop-icon.png"
                      width="18px"
                      alt=""
                  /></a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    <!-- check here -->
    <section style="background-color: var(--colors-green-light);">
        <!-- btn scroll up -->
        <button id="scrollButton"><i class="fa-solid fa-chevron-up"></i></button>
        <div id="slider-container" class="main-home-page container-xxl slider-container">
            <div class="slider"></div>
            <!-- Navigation buttons -->
            <div class="slider-nav">
                <button id="prevBtn"><i class="fa-solid fa-chevron-left"></i></button>
                <button id="nextBtn"><i class="fa-solid fa-chevron-right"></i></button>
            </div>
            <!-- Dots for navigation -->
            <div class="main-dot">
                <div class="slider-dots "></div>
            </div>
        </div>
    </section>

    <section style="padding-top: 50px">
        <div class="container container-popular-products">
            <div class="popular-products">
                <h2>Popular Products</h2>
                <div class="box">
                    <img class="vector" src="../frontend/public/images/vector-popular-products.png"
                        alt="vector under Popular Products" />
                </div>
            </div>
            <div class="row row-style" id="productContainer1">
                <!-- Product cards will be dynamically added here -->
            </div>
        </div>
    </section>

    <section style="padding-top: 50px">
        <div class="container container-popular-products">
            <div class="popular-products">
                <h2>Discount Products</h2>
                <div class="box">
                    <img class="vector" src="../frontend/public/images/vector-popular-products.png"
                        alt="vector under Popular Products" />
                </div>
            </div>
            <div class="row row-style" id="productContainer">
                <!-- Product cards will be dynamically added here -->
            </div>
        </div>
    </section>

    <section style="padding-top: 50px">
        <div class="container container-popular-products">
            <div class="popular-products">
                <h2>All Products</h2>
                <div class="box">
                    <img class="vector" src="../frontend/public/images/vector-popular-products.png"
                        alt="vector under Popular Products" />
                </div>
            </div>
            <div class="row row-style" id="productContainer2">
                <!-- Product cards will be dynamically added here -->
            </div>
        </div>
    </section>

    <script>
        // Fetch data from the API
        // fetch('http://localhost/p1/api/product/read.php')
        fetch(
            "http://localhost/web-assignment-main/backend/api/product/fetch_dis.php"
        )
            .then((response) => response.json())
            .then((data) => {
                const products = data.product; // Assuming the API response contains a 'product' array

                // Reference to the container where product cards will be added
                const productContainer = document.getElementById("productContainer");

                // Loop through each product and create HTML for product cards
                products.forEach((product) => {
                    const productCard = `
            <div class="col-sm-12 col-md-4 col-lg-3" style="padding-top: 30px">
                <div class="product-card">
                ${product.pro_dis > 0
                            ? `
                    <div class="discount">
                        <p class="discount-text">${product.pro_dis}%</p>
                    </div>
                `
                            : ""
                        }

        <div class="heart-icon">
            <i class="far fa-heart like-btn"></i>
        </div>
        <a class="product-card-link" href="../frontend/pages/detail-products/detail-product.html">
            <img class="cart-image" src="http://localhost/web-assignment-main/backend/api/image/${product.pro_img}" alt="${product.pro_name}" />
            <h3>${product.pro_name}</h3>
            <p>${product.pro_cal} Calories</p>
            <h4>${product.pro_price}$</h4>
        </a>
        <div class="add-to-cart">
            <i class="icon fa-solid fa-cart-shopping"></i>
        </div>
    </div>
</div>


                    `;
                    // Append the product card HTML to the container
                    productContainer.innerHTML += productCard;
                });
            })
            .catch((error) => console.error("Error fetching products:", error));

        fetch(
            "http://localhost/web-assignment-main/backend/api/product/fetch_popular.php"
        )
            .then((response) => response.json())
            .then((data) => {
                const products = data.product; // Assuming the API response contains a 'product' array

                // Reference to the container where product cards will be added
                const productContainer1 =
                    document.getElementById("productContainer1");

                // Loop through each product and create HTML for product cards
                products.forEach((product) => {
                    const productCard = `
                        <div class="col-sm-12 col-md-4 col-lg-3" style="padding-top: 30px">
                            <div class="product-card">
                                ${product.pro_dis > 0
                            ? `
                    <div class="discount">
                        <p class="discount-text">${product.pro_dis}%</p>
                    </div>
                `
                            : ""
                        }
                                <div class="heart-icon">
                                    <i class="far fa-heart like-btn"></i>
                                </div>
                                <a class="product-card-link" href="../frontend/pages/detail-products/detail-product.html">
                                    <img class="cart-image" src="http://localhost/web-assignment-main/backend/api/image/${product.pro_img}" alt="${product.pro_name}" />
                                    <h3>${product.pro_name}</h3>
                                    <p>${product.pro_cal} Calories</p>
                                    <h4>${product.pro_price}$</h4>
                                </a>
                                <div class="add-to-cart">
                                    <i class="icon fa-solid fa-cart-shopping"></i>
                                </div>
                            </div>
                        </div>
                    `;
                    // Append the product card HTML to the container
                    productContainer1.innerHTML += productCard;
                });
            })
            .catch((error) => console.error("Error fetching products:", error));

        fetch("http://localhost/web-assignment-main/backend/api/product/read.php")
            .then((response) => response.json())
            .then((data) => {
                const products = data.product; // Assuming the API response contains a 'product' array

                // Reference to the container where product cards will be added
                const productContainer2 =
                    document.getElementById("productContainer2");

                // Loop through each product and create HTML for product cards
                products.forEach((product) => {
                    const productCard = `
                        <div class="col-sm-12 col-md-4 col-lg-3" style="padding-top: 30px">
                            <div class="product-card">
                                ${product.pro_dis > 0
                            ? `
                    <div class="discount">
                        <p class="discount-text">${product.pro_dis}%</p>
                    </div>
                `
                            : ""
                        }
                                <div class="heart-icon">
                                    <i class="far fa-heart like-btn"></i>
                                </div>
                                <a class="product-card-link" href="../frontend/pages/detail-products/detail-product.html">
                                    <img class="cart-image" src="http://localhost/web-assignment-main/backend/api/image/${product.pro_img}" alt="${product.pro_name}" />
                                    <h3>${product.pro_name}</h3>
                                    <p>${product.pro_cal} Calories</p>
                                    <h4>${product.pro_price}$</h4>
                                </a>
                                <div class="add-to-cart">
                                    <i class="icon fa-solid fa-cart-shopping"></i>
                                </div>
                            </div>
                        </div>
                    `;
                    // Append the product card HTML to the container
                    productContainer2.innerHTML += productCard;
                });
            })
            .catch((error) => console.error("Error fetching products:", error));

        //slider

        fetch(
            "http://localhost/web-assignment-main/backend/api/product/fetch_dis.php"
        )
            .then((response) => response.json())
            .then((data) => {
                const sliderContainer = document.querySelector(".slider");

                data.forEach((product) => {
                    const slide = `
                    <div class="slide">
                        <div class="text-main-home-page">
                            <h1>${product.pro_name}</h1>
                            <h6>${product.pro_cal} Calories</h6>
                            <p>${product.pro_des}</p>
                            <a href="./pages/detail-products/detail-product.html" class="btn-buy-now-slide">Buy Now</a>
                        </div>
                        <div class="img-main-home-page">
                            <img src="http://localhost/web-assignment-main/backend/api/image/${product.pro_img}" alt="${product.pro_name}">
                        </div>
                    </div>
                `;
                    sliderContainer.innerHTML += slide;
                });
            })
            .catch((error) => console.error("Error fetching products:", error));

        // Fetch data for the slider
        document.addEventListener("DOMContentLoaded", function () {
            const slider = document.querySelector(".slider");
            const dotsContainer = document.querySelector(".slider-dots");

            fetch("http://localhost/web-assignment-main/backend/api/product/fetch_slider.php")
                .then(response => response.json())
                .then(data => {
                    const products = data.product;

                    products.forEach(product => {
                        const slide = document.createElement("div");
                        slide.classList.add("slide");
                        slide.innerHTML = `
                            <div class="text-main-home-page">
                                <h1>${product.pro_name}</h1>
                                <h6>${product.pro_cal} Calories</h6>
                                <p>${product.pro_des}</p>
                                <a href="./pages/detail-products/detail-product.html" class="btn-buy-now-slide">Buy Now</a>
                            </div>
                            <div class="img-main-home-page">
                                <img src="http://localhost/web-assignment-main/backend/api/image/${product.pro_img}" alt="${product.pro_name}" />
                            </div>
                        `;
                        slider.appendChild(slide);

                        // Create a dot for each slide
                        const dot = document.createElement("span");
                        dot.classList.add("dot");
                        dot.addEventListener("click", () => goToSlide(index));
                        dotsContainer.appendChild(dot);
                    });

                    const slides = document.querySelectorAll(".slide");
                    const dots = document.querySelectorAll(".dot");
                    const prevBtn = document.getElementById("prevBtn");
                    const nextBtn = document.getElementById("nextBtn");

                    dots[0].classList.add("active");

                    // Event listeners for navigation buttons
                    prevBtn.addEventListener("click", () => goToSlide(index - 1));
                    nextBtn.addEventListener("click", () => goToSlide(index + 1));

                    // Autoplay functionality
                    setInterval(() => {
                        goToSlide(index + 1);
                    }, 8000); // Adjust the interval (in milliseconds) as needed

                    let index = 0;

                    function goToSlide(i) {
                        if (i < 0) {
                            index = slides.length - 1;
                        } else if (i >= slides.length) {
                            index = 0;
                        } else {
                            index = i;
                        }

                        // Update the transform property to show the correct slide
                        slider.style.transform = `translateX(${-index * 100}%)`;

                        // Update the active dot
                        dots.forEach((dot, i) => {
                            dot.classList.toggle("active", index === i);
                        });
                    }
                })
                .catch(error => console.error("Error fetching data:", error));
        });




                
    </script>
</body>

</html>